<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"configs_eslint.conf.js.html":{"id":"configs_eslint.conf.js.html","title":"Source: configs/eslint.conf.js","body":" Itee-Server Modules Config-EsLintConfig-JsDocConfig-Karma-BenchsConfig-Karma-UnitsConfig-Rollupconfigs/Rollup-Test Source: configs/eslint.conf.js /** * @author [Tristan Valcke]{@link https://github.com/Itee} * @license [BSD-3-Clause]{@link https://opensource.org/licenses/BSD-3-Clause} * * @module Config-EsLint * @description The configuration file of the eslint plugin */ /** * Will create an appropriate configuration object for eslint * * @generator * @returns {object} The eslint configuration */ function CreateEslintConfiguration () { return { env: { 'browser': true, 'node': true, 'es6': true }, globals: { 'BigInt64Array': 'readonly', 'BigUint64Array': 'readonly' }, parserOptions: { ecmaVersion: 2018, sourceType: 'module' }, extends: [ 'eslint:recommended' ], plugins: [ 'mocha' ], rules: { 'no-multiple-empty-lines': [ 1, { 'max': 2 } ], 'no-mixed-spaces-and-tabs': 'off', 'mocha/no-exclusive-tests': 'error', 'no-console': 'warn', 'no-multi-spaces': [ 'error', { exceptions: { 'Property': true, 'ImportDeclaration': true, 'VariableDeclarator': true, 'AssignmentExpression': true } } ], 'key-spacing': [ 'error', { 'align': { 'beforeColon': false, 'afterColon': true, 'on': 'value' } } ] } } } module.exports = CreateEslintConfiguration() × Search results Close "},"configs_jsdoc.conf.js.html":{"id":"configs_jsdoc.conf.js.html","title":"Source: configs/jsdoc.conf.js","body":" Itee-Server Modules Config-EsLintConfig-JsDocConfig-Karma-BenchsConfig-Karma-UnitsConfig-Rollupconfigs/Rollup-Test Source: configs/jsdoc.conf.js /** * @author [Tristan Valcke]{@link https://github.com/Itee} * @license [BSD-3-Clause]{@link https://opensource.org/licenses/BSD-3-Clause} * * @module Config-JsDoc * @description The configuration file of the jsdoc plugin */ /** * Will create an appropriate configuration object for jsdoc * * @generator * @returns {object} The jsdoc configuration */ function CreateJsdocConfiguration () { return { tags: { allowUnknownTags: false, dictionaries: [ 'jsdoc', 'closure' ] }, source: { include: [ 'README.md' ], includePattern: '.+\\\\.js(doc|x)?$', excludePattern: '(node_modules|docs|builds|tests)', exclude: [] }, sourceType: 'module', plugins: [], recurseDepth: 5, opts: { access: 'all', debug: false, encoding: 'utf8', destination: 'docs', recurse: true, verbose: true, private: true }, templates: { cleverLinks: false, monospaceLinks: false, navType: 'inline', theme: [ 'cerulean', 'cosmo', 'darkly', 'cyborg', 'flatly', 'journal', 'lumen', 'paper', 'readable', 'sandstone', 'simplex', 'slate', 'spacelab', 'superhero', 'united', 'yeti' ][ 3 ], syntaxTheme: 'dark', linenums: true, collapseSymbols: false, sort: 'longname, version, since', search: true, systemName: 'Itee-Server', footer: '', copyright: 'Copyright 2015-Present &lt;a href=\"https://github.com/Itee\"&gt;Itee&lt;/a&gt; (Tristan Valcke)', includeDate: false, inverseNav: false, outputSourceFiles: true, outputSourcePath: true } } } module.exports = CreateJsdocConfiguration() × Search results Close "},"configs_karma.benchs.conf.js.html":{"id":"configs_karma.benchs.conf.js.html","title":"Source: configs/karma.benchs.conf.js","body":" Itee-Server Modules Config-EsLintConfig-JsDocConfig-Karma-BenchsConfig-Karma-UnitsConfig-Rollupconfigs/Rollup-Test Source: configs/karma.benchs.conf.js /** * @author [Tristan Valcke]{@link https://github.com/Itee} * @license [BSD-3-Clause]{@link https://opensource.org/licenses/BSD-3-Clause} * * @module Config-Karma-Benchs * @description The file manage the karma configuration for run benchmarks that are under `tests/benchmarks` folder */ const packageInfos = require( '../package' ) /** * Will assign an appropriate configuration object about benchmarks for karma. * * @generator * @param {object} config - The karma configuration object to extend */ function CreateKarmaBenchmarkConfiguration ( config ) { config.set( { // base path that will be used to resolve all patterns (eg. files, exclude) basePath: '../tests/', // frameworks to use // available frameworks: https://npmjs.org/browse/keyword/karma-adapter frameworks: [ 'benchmark' ], // list of files / patterns to load in the browser files: [ `builds/${packageInfos.name}.benchs.js` ], // list of files to exclude exclude: [], // preprocess matching files before serving them to the browser // available preprocessors: https://npmjs.org/browse/keyword/karma-preprocessor preprocessors: {}, // test results reporter to use // possible values: 'dots', 'progress' // available reporters: https://npmjs.org/browse/keyword/karma-reporter reporters: [ 'benchmark' ], benchmarkReporter: { colors: true, // style: { // benchmark: chalk.stripColor, // summaryBenchmark: chalk.underline, // summaryEmphasis: chalk.bold.underline, // browser: chalk.blue, // decorator: chalk.cyan, // hz: chalk.green, // hzUnits: chalk.italic.dim, // suite: chalk.bold.magenta // }, decorator: '*', terminalWidth: 60, hzWidth: 4, hzUnits: 'ops/sec', browserWidth: 40, showBrowser: false, showSuiteSummary: true // formatBenchmark: formatBenchmark, // formatSuiteHeading: formatSuiteHeading, // formatSuiteSummary: formatSuiteSummary }, // web server port port: 9876, // enable / disable colors in the output (reporters and logs) colors: true, // level of logging // possible values: config.LOG_DISABLE || config.LOG_ERROR || config.LOG_WARN || config.LOG_INFO || config.LOG_DEBUG logLevel: config.LOG_INFO, // enable / disable watching file and executing tests whenever any file changes autoWatch: false, // start these browsers // available browser launchers: https://npmjs.org/browse/keyword/karma-launcher browsers: [ 'Firefox' ], // browsers: [ 'Chrome' ], // browsers: [ 'Edge' ], // browsers: [ 'Firefox', 'Chrome', 'Edge' ], // Format assertion errors and stack traces. Useful for removing vendors and compiled sources. Return an empty line '' to remove it. formatError: () =&gt; '', // Continuous Integration mode // if true, Karma captures browsers, runs the tests and exits singleRun: true, // Concurrency level // how many browser should be started simultaneous concurrency: 4, // If, during test execution, Karma does not receive any message from a browser browserNoActivityTimeout: 60000, browserDisconnectTimeout: 60000, // If browser does not capture in given timeout [ms], kill it captureTimeout: 60000, // How long will Karma wait for browser process to terminate before sending a SIGKILL signal. processKillTimeout: 360000 } ) } module.exports = CreateKarmaBenchmarkConfiguration × Search results Close "},"configs_karma.units.conf.js.html":{"id":"configs_karma.units.conf.js.html","title":"Source: configs/karma.units.conf.js","body":" Itee-Server Modules Config-EsLintConfig-JsDocConfig-Karma-BenchsConfig-Karma-UnitsConfig-Rollupconfigs/Rollup-Test Source: configs/karma.units.conf.js /** * @author [Tristan Valcke]{@link https://github.com/Itee} * @license [BSD-3-Clause]{@link https://opensource.org/licenses/BSD-3-Clause} * * @module Config-Karma-Units * @description The file manage the karma configuration for run units tests that are under `tests/units` folder */ const packageInfos = require( '../package' ) /** * Will assign an appropriate configuration object about unit tests for karma. * * @generator * @param {object} config - The karma configuration object to extend */ function CreateKarmaUnitsConfiguration ( config ) { config.set( { // base path that will be used to resolve all patterns (eg. files, exclude) basePath: '../tests/', // frameworks to use // available frameworks: https://npmjs.org/browse/keyword/karma-adapter frameworks: [ 'mocha', 'chai' ], // list of files / patterns to load in the browser files: [ `builds/${packageInfos.name}.units.js` ], // list of files to exclude exclude: [], // preprocess matching files before serving them to the browser // available preprocessors: https://npmjs.org/browse/keyword/karma-preprocessor preprocessors: {}, // test results reporter to use // possible values: 'dots', 'progress' // available reporters: https://npmjs.org/browse/keyword/karma-reporter reporters: [ 'mocha', 'html' ], htmlReporter: { outputFile: '../docs/unit-tests-report.html', // Optional pageTitle: 'Unit Tests', subPageTitle: 'Result of unit testing for Itee-Server.', groupSuites: true, useCompactStyle: false, useLegacyStyle: false, showOnlyFailed: false }, // web server port port: 9876, // enable / disable colors in the output (reporters and logs) colors: true, // level of logging // possible values: config.LOG_DISABLE || config.LOG_ERROR || config.LOG_WARN || config.LOG_INFO || config.LOG_DEBUG logLevel: config.LOG_INFO, // enable / disable watching file and executing tests whenever any file changes autoWatch: false, // start these browsers // available browser launchers: https://npmjs.org/browse/keyword/karma-launcher browsers: [ 'Firefox' ], // browsers: [ 'Chrome' ], // browsers: [ 'Edge' ], // browsers: [ 'Firefox', 'Chrome', 'Edge' ], // Format assertion errors and stack traces. Useful for removing vendors and compiled sources. Return an empty line '' to remove it. formatError: () =&gt; '', // Continuous Integration mode // if true, Karma captures browsers, runs the tests and exits singleRun: true, // Concurrency level // how many browser should be started simultaneous concurrency: 4, // If, during test execution, Karma does not receive any message from a browser browserNoActivityTimeout: 60000, browserDisconnectTimeout: 60000, // If browser does not capture in given timeout [ms], kill it captureTimeout: 60000, // How long will Karma wait for browser process to terminate before sending a SIGKILL signal. processKillTimeout: 360000 } ) } module.exports = CreateKarmaUnitsConfiguration × Search results Close "},"configs_rollup.conf.js.html":{"id":"configs_rollup.conf.js.html","title":"Source: configs/rollup.conf.js","body":" Itee-Server Modules Config-EsLintConfig-JsDocConfig-Karma-BenchsConfig-Karma-UnitsConfig-Rollupconfigs/Rollup-Test Source: configs/rollup.conf.js /** * @author [Tristan Valcke]{@link https://github.com/Itee} * @license [BSD-3-Clause]{@link https://opensource.org/licenses/BSD-3-Clause} * * @module Config-Rollup * @description The file manage the rollup configuration for build the library using differents arguments. It allow to build with two type of environment (dev and prod), and differents output format. * Use npm run help to display all available build options. * * @requires {@link module: [rollup-plugin-commonjs]{@link https://github.com/rollup/rollup-plugin-commonjs}} * @requires {@link module: [path]{@link https://nodejs.org/api/path.html}} * @requires {@link module: [rollup-plugin-node-resolve]{@link https://github.com/rollup/rollup-plugin-node-resolve}} * @requires {@link module: [rollup-plugin-terser]{@link https://github.com/TrySound/rollup-plugin-terser}} */ const packageInfos = require( '../package' ) const path = require( 'path' ) const commonjs = require( '@rollup/plugin-commonjs' ) const { nodeResolve } = require( '@rollup/plugin-node-resolve' ) const terser = require( 'rollup-plugin-terser' ).terser const figlet = require( 'figlet' ) function getPrettyPackageName() { let packageName = '' const nameSplits = packageInfos.name.split( '-' ) for ( const nameSplit of nameSplits ) { packageName += nameSplit.charAt( 0 ).toUpperCase() + nameSplit.slice( 1 ) + '.' } packageName = packageName.slice( 0, -1 ) return packageName } function getPrettyPackageVersion() { return 'v' + packageInfos.version } function getPrettyFormatForBanner( format ) { let prettyFormat = '' switch ( format ) { case 'cjs': prettyFormat = 'CommonJs' break case 'esm': prettyFormat = 'EsModule' break case 'iife': prettyFormat = 'Standalone' break case 'umd': prettyFormat = 'Universal' break default: throw new RangeError( `Invalid switch parameter: ${ format }` ) } return prettyFormat } function _commentarize( banner ) { let bannerCommented = '/**\\n' bannerCommented += ' * ' bannerCommented += banner.replaceAll( '\\n', '\\n * ' ) bannerCommented += '\\n' bannerCommented += ` * @desc ${ packageInfos.description }\\n` bannerCommented += ' * @author [Tristan Valcke]{@link https://github.com/Itee}\\n' bannerCommented += ' * @license [BSD-3-Clause]{@link https://opensource.org/licenses/BSD-3-Clause}\\n' bannerCommented += ' * \\n' bannerCommented += ' */' return bannerCommented } function _computeBanner( format ) { const packageName = getPrettyPackageName() const packageVersion = getPrettyPackageVersion() const prettyFormat = getPrettyFormatForBanner( format ) const figText = figlet.textSync( `${ packageName } ${ packageVersion } - ${ prettyFormat }`, { font: 'Tmplr', horizontalLayout: 'default', verticalLayout: 'default', whitespaceBreak: true, } ) return _commentarize( figText ) } /** * Will create an appropriate configuration object for rollup, related to the given arguments. * * @generator * @param options * @return {Array.&lt;json&gt;} An array of rollup configuration */ function CreateRollupConfigs( options ) { 'use strict' const { input, output, formats, envs, treeshake } = options const name = getPrettyPackageName() const fileName = path.basename( input, '.js' ) const configs = [] for ( let formatIndex = 0, numberOfFormats = formats.length ; formatIndex &lt; numberOfFormats ; ++formatIndex ) { for ( let envIndex = 0, numberOfEnvs = envs.length ; envIndex &lt; numberOfEnvs ; envIndex++ ) { const env = envs[ envIndex ] const isProd = ( env.includes( 'prod' ) ) const format = formats[ formatIndex ] const outputPath = ( isProd ) ? path.join( output, `${ fileName }.${ format }.min.js` ) : path.join( output, `${ fileName }.${ format }.js` ) configs.push( { input: input, external: [ 'fs', 'express', 'http', 'https', 'path', 'itee-validators', 'itee-core', 'itee-database' ], plugins: [ commonjs( { include: 'node_modules/**' } ), nodeResolve( { preferBuiltins: true } ), isProd &amp;&amp; terser() ], onwarn: ( { loc, frame, message } ) =&gt; { // Ignore some errors if ( message.includes( 'Circular dependency' ) ) { return } if ( message.includes( 'plugin uglify is deprecated' ) ) { return } if ( loc ) { process.stderr.write( `/!\\\\ ${ loc.file } (${ loc.line }:${ loc.column }) ${ frame } ${ message }\\n` ) } else { process.stderr.write( `/!\\\\ ${ message }\\n` ) } }, treeshake: treeshake, output: { // core options file: outputPath, format: format, name: name, globals: {}, // advanced options paths: {}, banner: ( isProd ) ? '' : _computeBanner( format ), footer: '', intro: '', outro: '', sourcemap: !isProd, interop: true, // danger zone exports: 'auto', amd: {}, indent: '\\t', strict: true } } ) } } return configs } module.exports = CreateRollupConfigs × Search results Close "},"configs_rollup.benchs.conf.js.html":{"id":"configs_rollup.benchs.conf.js.html","title":"Source: configs/rollup.benchs.conf.js","body":" Itee-Server Modules Config-EsLintConfig-JsDocConfig-Karma-BenchsConfig-Karma-UnitsConfig-Rollupconfigs/Rollup-Test Source: configs/rollup.benchs.conf.js /** * @author [Tristan Valcke]{@link https://github.com/Itee} * @license [BSD-3-Clause]{@link https://opensource.org/licenses/BSD-3-Clause} * * @module configs/Rollup-Test * @description The file manage the rollup configuration for build tests */ const packageInfos = require( '../package' ) const {nodeResolve} = require('@rollup/plugin-node-resolve') /** * Will create an appropriate configuration object for rollup, related to the given arguments. * * @generator * @return {Array.&lt;json&gt;} An array of rollup configuration */ function CreateBenchmarksRollupConfigs ( /*options*/ ) { 'use strict' return [ // For Node { input: `tests/benchmarks/${packageInfos.name}.benchs.js`, external: [ 'benchmark', 'express', 'http', 'https', 'fs', 'path', 'crypto' ], plugins: [ nodeResolve( { preferBuiltins: true } ) ], treeshake: true, output: { indent: '\\t', format: 'cjs', name: 'Itee.Benchs', file: `tests/benchmarks/builds/${packageInfos.name}.benchs.cjs.js` } }, // For Karma // { // input: `tests/benchmarks/${packageInfos.name}.benchs.js`, // plugins: [], // treeshake: true, // output: { // indent: '\\t', // format: 'iife', // name: 'Itee.Benchs', // file: `tests/benchmarks/builds/${packageInfos.name}.benchs.iife.js` // } // }, ] } module.exports = CreateBenchmarksRollupConfigs × Search results Close "},"configs_rollup.units.conf.js.html":{"id":"configs_rollup.units.conf.js.html","title":"Source: configs/rollup.units.conf.js","body":" Itee-Server Modules Config-EsLintConfig-JsDocConfig-Karma-BenchsConfig-Karma-UnitsConfig-Rollupconfigs/Rollup-Test Source: configs/rollup.units.conf.js /** * @author [Tristan Valcke]{@link https://github.com/Itee} * @license [BSD-3-Clause]{@link https://opensource.org/licenses/BSD-3-Clause} * * @module configs/Rollup-Test * @description The file manage the rollup configuration for build tests */ const packageInfos = require( '../package' ) const {nodeResolve} = require('@rollup/plugin-node-resolve') /** * Will create an appropriate configuration object for rollup, related to the given arguments. * * @generator * @return {Array.&lt;json&gt;} An array of rollup configuration */ function CreateUnitsRollupConfigs ( /*options*/ ) { 'use strict' return [ // For node { input: `tests/units/${packageInfos.name}.units.js`, external: [ 'mocha', 'chai', 'express' ], plugins: [ nodeResolve( { preferBuiltins: true } ) ], treeshake: true, output: { indent: '\\t', format: 'cjs', name: 'Itee.Units', file: `tests/units/builds/${packageInfos.name}.units.cjs.js` } }, // For karma // { // input: `tests/units/${packageInfos.name}.units.js`, // external: [ 'chai', 'mocha' ], // plugins: [], // treeshake: true, // output: { // indent: '\\t', // format: 'iife', // name: 'Itee.Units', // globals: { // 'chai': 'chai', // 'mocha': 'mocha' // }, // file: `tests/units/builds/${packageInfos.name}.units.iife.js` // } // }, ] } module.exports = CreateUnitsRollupConfigs × Search results Close "},"sources_itee-server.js.html":{"id":"sources_itee-server.js.html","title":"Source: sources/itee-server.js","body":" Itee-Server Modules Config-EsLintConfig-JsDocConfig-Karma-BenchsConfig-Karma-UnitsConfig-Rollupconfigs/Rollup-Test Source: sources/itee-server.js /** * @author [Tristan Valcke]{@link https://github.com/Itee} * @license [BSD-3-Clause]{@link https://opensource.org/licenses/BSD-3-Clause} * * @file Todo * * @example Todo * */ export * from './TBackendManager' × Search results Close "},"sources_TBackendManager.js.html":{"id":"sources_TBackendManager.js.html","title":"Source: sources/TBackendManager.js","body":" Itee-Server Modules Config-EsLintConfig-JsDocConfig-Karma-BenchsConfig-Karma-UnitsConfig-Rollupconfigs/Rollup-Test Source: sources/TBackendManager.js /** * @author [Tristan Valcke]{@link https://github.com/Itee} * @license [BSD-3-Clause]{@link https://opensource.org/licenses/BSD-3-Clause} * * @file Todo * * @example Todo * */ import express from 'express' import http from 'http' import https from 'https' import { DefaultLogger, TAbstractObject } from 'itee-core' //todo: import Databases from 'itee-database' import { isArray, isBlankString, isDefined, isEmptyString, isNotArray, isNotString, isNull, isUndefined } from 'itee-validators' import path from 'path' class TBackendManager extends TAbstractObject { constructor ( parameters = {} ) { const _parameters = { ...{ logger: DefaultLogger, rootPath: __dirname, applications: [], databases: [], servers: [] }, ...parameters } super( _parameters ) this.logger = _parameters.logger this.rootPath = _parameters.rootPath this.applications = express() this.router = express.Router this.databases = new Map() this.servers = new Map() this.connections = [] this._initApplications( _parameters.applications ) this._initDatabases( _parameters.databases ) this._initServers( _parameters.servers ) } get applications () { return this._applications } set applications ( value ) { this._applications = value } get router () { return this._router } // Todo remove middleware set router ( value ) { this._router = value } get databases () { return this._databases } set databases ( value ) { this._databases = value } get servers () { return this._servers } set servers ( value ) { this._servers = value } get rootPath () { return this._rootPath } set rootPath ( value ) { if ( isNull( value ) ) { throw new TypeError( 'Root path cannot be null ! Expect a non empty string.' ) } if ( isUndefined( value ) ) { throw new TypeError( 'Root path cannot be undefined ! Expect a non empty string.' ) } if ( isNotString( value ) ) { throw new TypeError( `Root path cannot be an instance of ${ value.constructor.name } ! Expect a non empty string.` ) } if ( isEmptyString( value ) ) { throw new TypeError( 'Root path cannot be empty ! Expect a non empty string.' ) } if ( isBlankString( value ) ) { throw new TypeError( 'Root path cannot contain only whitespace ! Expect a non empty string.' ) } this._rootPath = value } setApplications ( value ) { this.applications = value return this } addMiddleware ( middleware ) { this.applications.use( middleware ) return this } setRouter ( value ) { this.router = value return this } setDatabases ( value ) { this.databases = value return this } addDatabase ( databaseName, database ) { this._databases.set( databaseName, database ) return this } setServers ( value ) { this.servers = value return this } setRootPath ( value ) { this.rootPath = value return this } _initApplications ( config ) { if ( config.case_sensitive_routing ) { this.applications.set( 'case sensitive routing', config.case_sensitive_routing ) } if ( config.env ) { this.applications.set( 'env', config.env ) } if ( config.etag ) { this.applications.set( 'etag', config.etag ) } if ( config.jsonp_callback_name ) { this.applications.set( 'jsonp callback name', config.jsonp_callback_name ) } if ( config.jsonp_escape ) { this.applications.set( 'json escape', config.jsonp_escape ) } if ( config.jsonp_replacer ) { this.applications.set( 'json replacer', config.jsonp_replacer ) } if ( config.jsonp_spaces ) { this.applications.set( 'json spaces', config.jsonp_spaces ) } if ( config.query_parser ) { this.applications.set( 'query parser', config.query_parser ) } if ( config.strict_routing ) { this.applications.set( 'strict routing', config.strict_routing ) } if ( config.subdomain_offset ) { this.applications.set( 'subdomain offset', config.subdomain_offset ) } if ( config.trust_proxy ) { this.applications.set( 'trust proxy', config.trust_proxy ) } if ( config.views ) { this.applications.set( 'views', config.views ) } if ( config.view_cache ) { this.applications.set( 'view cache', config.view_cache ) } if ( config.view_engine ) { this.applications.set( 'view engine', config.view_engine ) } if ( config.x_powered_by ) { this.applications.set( 'x-powered-by', config.x_powered_by ) } this._initMiddlewares( config.middlewares ) this._initRouters( config.routers ) } _initMiddlewares ( middlewaresConfig ) { for ( let [ name, config ] of Object.entries( middlewaresConfig ) ) { if ( isNotArray( config ) ) { throw new TypeError( `Invalid middlware configuration for ${ name }, expecting an array of arguments to spread to middleware module, got ${ config.constructor.name }` ) } if ( this._initPackageMiddleware( name, config ) ) { this.logger.log( `Use ${ name } middleware from node_modules` ) } else if ( this._initLocalMiddleware( name, config ) ) { this.logger.log( `Use ${ name } middleware from local folder` ) } else { this.logger.error( `Unable to register the middleware ${ name } the package and/or local file doesn't seem to exist ! Skip it.` ) } } } _initPackageMiddleware ( name, config ) { let success = false try { this.applications.use( require( name )( ...config ) ) success = true } catch ( error ) { if ( !error.code || error.code !== 'MODULE_NOT_FOUND' ) { this.logger.error( `The middleware \"${ name }\" seems to encounter internal error.` ) this.logger.error( error ) } } return success } _initLocalMiddleware ( name, config ) { let success = false try { const localMiddlewaresPath = path.join( this.rootPath, 'middlewares', name ) this.applications.use( require( localMiddlewaresPath )( ...config ) ) success = true } catch ( error ) { this.logger.error( error ) } return success } _initRouters ( routers ) { for ( let [ baseRoute, routerPath ] of Object.entries( routers ) ) { if ( this._initPackageRouter( baseRoute, routerPath ) ) { this.logger.log( `Use ${ routerPath } router from node_modules over base route: ${ baseRoute }` ) } else if ( this._initLocalRouter( baseRoute, routerPath ) ) { this.logger.log( `Use ${ routerPath } router from local folder over base route: ${ baseRoute }` ) } else { this.logger.error( `Unable to register the router ${ routerPath } the package and/or local file doesn't seem to exist ! Skip it.` ) } } } _initPackageRouter ( baseRoute, routerPath ) { let success = false try { this.applications.use( baseRoute, require( routerPath ) ) success = true } catch ( error ) { if ( !error.code || error.code !== 'MODULE_NOT_FOUND' ) { this.logger.error( `The router \"${ name }\" seems to encounter internal error.` ) this.logger.error( error ) } } return success } _initLocalRouter ( baseRoute, routerPath ) { let success = false try { const localRoutersPath = path.join( this.rootPath, 'routers', routerPath ) this.applications.use( baseRoute, require( localRoutersPath ) ) success = true } catch ( error ) { if ( error instanceof TypeError &amp;&amp; error.message === 'Found non-callable @@iterator' ) { this.logger.error( `The router \"${ name }\" seems to encounter error ! Are you using an object instead an array for router configuration ?` ) } this.logger.error( error ) } return success } _initDatabases ( config ) { for ( let configIndex = 0, numberOfDatabasesConfigs = config.length ; configIndex &lt; numberOfDatabasesConfigs ; configIndex++ ) { const databaseConfig = config[ configIndex ] const dbType = databaseConfig.type const dbFrom = databaseConfig.from const dbName = `${ ( databaseConfig.name ) ? databaseConfig.name : `${ dbType }_${ configIndex }` }` try { let database = null if ( isDefined( dbFrom ) ) { // In case user specify a package where take the database of type... const databasePackage = require( dbFrom ) database = new databasePackage[ dbType ]( { ...{ application: this.applications, router: this.router }, ...databaseConfig } ) } else { // // Else try to use auto registered database // database = new Databases[ dbType ]( { // ...{ // application: this.applications, // router: this.router // }, // ...databaseConfig // } ) } // Todo move in start database.connect() this.databases.set( dbName, database ) } catch ( error ) { this.logger.error( `Unable to create database of type ${ dbType } due to ${ error.name }` ) this.logger.error( error.message ) this.logger.error( error.stack ) } } } _initServers ( config ) { const _config = ( isArray( config ) ) ? config : [ config ] for ( let configId = 0, numberOfConfigs = _config.length ; configId &lt; numberOfConfigs ; configId++ ) { let configElement = _config[ configId ] let server = null if ( configElement.type === 'https' ) { const options = { pfx: configElement.pfx, passphrase: configElement.passphrase } server = https.createServer( options, this.applications ) } else { server = http.createServer( this.applications ) } server.name = configElement.name || `${ ( configElement.name ) ? configElement.name : `Server_${ configId }` }` server.maxHeadersCount = configElement.max_headers_count server.timeout = configElement.timeout server.type = configElement.type server.host = configElement.host server.port = configElement.port server.env = configElement.env server.listen( configElement.port, configElement.host, () =&gt; { this.logger.log( `${ server.name } start listening on ${ server.type }://${ server.host }:${ server.port } at ${ new Date() } under ${ server.env } environment.` ) } ) server.on( 'connection', connection =&gt; { this.connections.push( connection ) connection.on( 'close', () =&gt; { this.connections = this.connections.filter( curr =&gt; curr !== connection ) } ) } ) this.servers.set( server.name, server ) } } /** * * @param databaseKey * @param eventName * @param callback */ databaseOn ( databaseKey, eventName, callback ) {} // eslint-disable-line no-unused-vars serverOn ( serverName, eventName, callback ) { this.servers[ serverName ].on( eventName, callback ) } serversOn ( serverKey, eventName, callback ) { //TODO: filter availaible events // [ 'request', 'connection', 'close', 'timeout', 'checkContinue', 'connect', 'upgrade', 'clientError' ] for ( let serverKey in this.servers ) { this.serverOn( serverKey, eventName, callback ) } } start () { } stop ( callback ) { const numberOfServers = this.servers.size const numberOfDatabases = this.databases.size let shutDownServers = 0 let closedDatabases = 0 if ( allClosed() ) { return } for ( const [ databaseName, database ] of this.databases ) { database.close( () =&gt; { closedDatabases++ this.logger.log( `Connection to ${ databaseName } is closed.` ) allClosed() } ) } for ( let connection of this.connections ) { connection.end() } for ( const [ serverName, server ] of this.servers ) { server.close( () =&gt; { shutDownServers++ this.logger.log( `The ${ serverName } listening on ${ server.type }://${ server.host }:${ server.port } is shutted down.` ) allClosed() } ) } function allClosed () { if ( shutDownServers &lt; numberOfServers ) { return false } if ( closedDatabases &lt; numberOfDatabases ) { return false } if ( callback ) { callback() } } } closeServers () { } } export { TBackendManager } × Search results Close "},"modules.list.html":{"id":"modules.list.html","title":"Modules","body":" Itee-Server Modules Config-EsLintConfig-JsDocConfig-Karma-BenchsConfig-Karma-UnitsConfig-Rollupconfigs/Rollup-Test Modules × Search results Close "},"index.html":{"id":"index.html","title":"Index","body":" Itee-Server Modules Config-EsLintConfig-JsDocConfig-Karma-BenchsConfig-Karma-UnitsConfig-Rollupconfigs/Rollup-Test [Itee Server] The itee server is the back end part of the itee solution predicted for running WebGL 3d content. It allow to CRUD operation throught an RestFull Api in link with a mongo database. How to install From npm: npm install itee-server If you want to build the repository from source follow these instructions: git clone https://github.com/Itee/itee-server.git npm install npm run build How to use At begin was RTFM ! In case you have clone the repository you could also auto-generate the library documentation using: npm run doc then you will be able to use like this: import { TBackendManager } from 'itee-server' const backendManager = new TBackendManager({ rootPath: path.join( __dirname, '..', 'servers' ), databases: [ { type: 'TMongoDBDatabase', name: 'MongoDB', databaseUrl: `mongodb://127.0.0.1:27017/mydb`, plugins: [] } ], applications: { // All express configs, see: https://expressjs.com/en/4x/api.html#app.set env: process.env.NODE_ENV, // All express middleswares middlewares: { morgan: { interval: '1d', directoryPath: path.join( __dirname, '..', 'servers/logs/access.log' ), fileName: 'access.log' }, favicon: { path: path.join( __dirname, '..', 'servers/resources/favicon.ico' ) }, //... }, // Static routers routers: { '/': 'index/index.js', '/downloads': 'downloads/downloads.js', '/resources': 'resources/resources.js' }, }, servers: { type: 'http', max_headers_count: 1100, timeout: 30000 } }) License (BSD-3-Clause) Copyright (c) 2015-Present, Itee, Valcke Tristan https://github.com/Itee. All rights reserved. Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met: Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution. Neither the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission. THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. You should have received a copy of the BSD-3-Clause along with this program. If not, see https://opensource.org/licenses/BSD-3-Clause. Index sources/itee-server.js Todo Author: Tristan Valcke License: BSD-3-Clause Source: sources/itee-server.js, line 1 Example Todo Index sources/TBackendManager.js Todo Author: Tristan Valcke License: BSD-3-Clause Source: sources/TBackendManager.js, line 1 Example Todo × Search results Close "},"module-Config-EsLint.html":{"id":"module-Config-EsLint.html","title":"Module: Config-EsLint","body":" Itee-Server Modules Config-EsLintConfig-JsDocConfig-Karma-BenchsConfig-Karma-UnitsConfig-Rollupconfigs/Rollup-Test Module: Config-EsLint The configuration file of the eslint plugin Author: Tristan Valcke License: BSD-3-Clause Source: configs/eslint.conf.js, line 1 Methods &lt;generator, inner&gt; CreateEslintConfiguration() Will create an appropriate configuration object for eslint Source: configs/eslint.conf.js, line 15 Returns: The eslint configuration Type object × Search results Close "},"module-Config-JsDoc.html":{"id":"module-Config-JsDoc.html","title":"Module: Config-JsDoc","body":" Itee-Server Modules Config-EsLintConfig-JsDocConfig-Karma-BenchsConfig-Karma-UnitsConfig-Rollupconfigs/Rollup-Test Module: Config-JsDoc The configuration file of the jsdoc plugin Author: Tristan Valcke License: BSD-3-Clause Source: configs/jsdoc.conf.js, line 1 Methods &lt;generator, inner&gt; CreateJsdocConfiguration() Will create an appropriate configuration object for jsdoc Source: configs/jsdoc.conf.js, line 15 Returns: The jsdoc configuration Type object × Search results Close "},"module-Config-Karma-Benchs.html":{"id":"module-Config-Karma-Benchs.html","title":"Module: Config-Karma-Benchs","body":" Itee-Server Modules Config-EsLintConfig-JsDocConfig-Karma-BenchsConfig-Karma-UnitsConfig-Rollupconfigs/Rollup-Test Module: Config-Karma-Benchs The file manage the karma configuration for run benchmarks that are under `tests/benchmarks` folder Author: Tristan Valcke License: BSD-3-Clause Source: configs/karma.benchs.conf.js, line 1 Methods &lt;generator, inner&gt; CreateKarmaBenchmarkConfiguration(config) Will assign an appropriate configuration object about benchmarks for karma. Parameters: Name Type Description config object The karma configuration object to extend Source: configs/karma.benchs.conf.js, line 17 × Search results Close "},"module-Config-Karma-Units.html":{"id":"module-Config-Karma-Units.html","title":"Module: Config-Karma-Units","body":" Itee-Server Modules Config-EsLintConfig-JsDocConfig-Karma-BenchsConfig-Karma-UnitsConfig-Rollupconfigs/Rollup-Test Module: Config-Karma-Units The file manage the karma configuration for run units tests that are under `tests/units` folder Author: Tristan Valcke License: BSD-3-Clause Source: configs/karma.units.conf.js, line 1 Methods &lt;generator, inner&gt; CreateKarmaUnitsConfiguration(config) Will assign an appropriate configuration object about unit tests for karma. Parameters: Name Type Description config object The karma configuration object to extend Source: configs/karma.units.conf.js, line 17 × Search results Close "},"module-Config-Rollup.html":{"id":"module-Config-Rollup.html","title":"Module: Config-Rollup","body":" Itee-Server Modules Config-EsLintConfig-JsDocConfig-Karma-BenchsConfig-Karma-UnitsConfig-Rollupconfigs/Rollup-Test Module: Config-Rollup The file manage the rollup configuration for build the library using differents arguments. It allow to build with two type of environment (dev and prod), and differents output format. Use npm run help to display all available build options. Author: Tristan Valcke License: BSD-3-Clause Source: configs/rollup.conf.js, line 1 Requires rollup-plugin-commonjs path rollup-plugin-node-resolve rollup-plugin-terser Methods &lt;generator, inner&gt; CreateRollupConfigs(options) Will create an appropriate configuration object for rollup, related to the given arguments. Parameters: Name Type Description options Source: configs/rollup.conf.js, line 116 Returns: An array of rollup configuration Type Array.&lt;json&gt; × Search results Close "},"module-configs_Rollup-Test.html":{"id":"module-configs_Rollup-Test.html","title":"Module: configs/Rollup-Test","body":" Itee-Server Modules Config-EsLintConfig-JsDocConfig-Karma-BenchsConfig-Karma-UnitsConfig-Rollupconfigs/Rollup-Test Module: configs/Rollup-Test The file manage the rollup configuration for build tests Author: Tristan Valcke License: BSD-3-Clause Source: configs/rollup.benchs.conf.js, line 1 Methods &lt;generator, inner&gt; CreateBenchmarksRollupConfigs() Will create an appropriate configuration object for rollup, related to the given arguments. Source: configs/rollup.benchs.conf.js, line 18 Returns: An array of rollup configuration Type Array.&lt;json&gt; &lt;generator, inner&gt; CreateUnitsRollupConfigs() Will create an appropriate configuration object for rollup, related to the given arguments. Source: configs/rollup.units.conf.js, line 18 Returns: An array of rollup configuration Type Array.&lt;json&gt; Module: configs/Rollup-Test The file manage the rollup configuration for build tests Author: Tristan Valcke License: BSD-3-Clause Source: configs/rollup.units.conf.js, line 1 Methods &lt;generator, inner&gt; CreateBenchmarksRollupConfigs() Will create an appropriate configuration object for rollup, related to the given arguments. Source: configs/rollup.benchs.conf.js, line 18 Returns: An array of rollup configuration Type Array.&lt;json&gt; &lt;generator, inner&gt; CreateUnitsRollupConfigs() Will create an appropriate configuration object for rollup, related to the given arguments. Source: configs/rollup.units.conf.js, line 18 Returns: An array of rollup configuration Type Array.&lt;json&gt; × Search results Close "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
